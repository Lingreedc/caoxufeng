{% extends 'base.html' %}
{% block title %}首页 - 追梦人物的博客{% endblock title %}
{% load blog_tags comments %}
{% block main %}
    <main class="unit-3-4 unit-1-on-mobile">
        <section class="category-widget hide-on-mobile">
            {% get_categories as category_list %}
            <h6>推荐教程</h6>
            <ul class="list-unstyle-inline category-list">
                {% for category in category_list %}
                    <li>
                        <a class="category-label" href="{{ category.get_absolute_url }}">{{ category.name }}</a>
                    </li>
                {% endfor %}
            </ul>
        </section>
        <section class="post-list">
            {% for post in post_list %}
                <article>
                    <div class="flex-left units-gap">
                        <div class="unit-0">
                            <header class="text-small post-header-meta">
                                <span class="author">{{ post.author.name }}</span>
                                <span class="pub-date text-muted"><time
                                        title="{{ post.created_time }}">{{ post.created_time|timesince }}</time>前</span>
                            </header>
                            <div class="post-main-info">
                                <a class="title" href="{{ post.get_absolute_url }}">{{ post.title }}</a>
                                <div class="text-small excerpt">
                                    {{ post.excerpt }}...
                                </div>
                            </div>
                            <footer class="text-small post-footer-meta">
                                {% if post.category %}
                                    <span class="category">
                                <a href="{{ post.category.get_absolute_url }}">{{ post.category.name }}</a>
                            </span>
                                {% endif %}
                                <span class="views">
                                <a class="text-muted" href="{{ post.get_absolute_url }}">
                                    <i class="fa fa-eye" aria-hidden="true"></i> {{ post.views }}</a>
                            </span>
                                {% get_comment_count for post as comment_count %}
                                <span class="comments"><a class="text-muted" href="detail.html"><i
                                        class="fa fa-comments-o"
                                        aria-hidden="true"></i> {{ comment_count }}</a></span>
                            </footer>
                        </div>
                        {% if post.cover %}
                            <div class="unit-1-4 hide-on-mobile flex-right flex-middle">
                                <figure class="post-cover">
                                    <a href="detail.html"><img class="post-cover-image" src="images/500_400.jpg"
                                                               alt=""></a>
                                </figure>
                            </div>
                        {% endif %}
                    </div>
                </article>
            {% empty %}
                <div class="no-post">暂时还没有发布的文章！</div>
            {% endfor %}
        </section>
        {% block pagination %}
            {% if is_paginated %}
                <aside class="pagination flex-center">
                    <ul class="pagination-bar list-unstyle-inline">
                        {% if first %}
                            <li><a href="?page=1">1</a></li>
                        {% endif %}
                        {% if left %}
                            {% if left_has_more %}
                                <li><span>...</span></li>
                            {% endif %}
                            {% for i in left %}
                                <li><a href="?page={{ i }}">{{ i }}</a></li>
                            {% endfor %}
                        {% endif %}
                        <li class="current"><a
                                href="?page={{ page_obj.number }}">{{ page_obj.number }}</a></li>
                        {% if right %}
                            {% for i in right %}
                                <li><a href="?page={{ i }}">{{ i }}</a></li>
                            {% endfor %}
                            {% if right_has_more %}
                                <li><span>...</span></li>
                            {% endif %}
                        {% endif %}
                        {% if last %}
                            <li>
                                <a href="?page={{ paginator.num_pages }}">{{ paginator.num_pages }}</a>
                            </li>
                        {% endif %}
                    </ul>
                </aside>
            {% endif %}
        {% endblock pagination %}
    </main>
{% endblock main %}